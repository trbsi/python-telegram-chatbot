<!-- Minimal JS for interactions (menu toggle + year) -->
<script>
    // Mobile nav toggle
    const navToggle = document.getElementById('nav-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const iconOpen = document.getElementById('icon-open');
    const iconClose = document.getElementById('icon-close');

    navToggle?.addEventListener('click', () => {
        const expanded = navToggle.getAttribute('aria-expanded') === 'true';
        navToggle.setAttribute('aria-expanded', String(!expanded));
        mobileMenu.classList.toggle('hidden');
        iconOpen.classList.toggle('hidden');
        iconClose.classList.toggle('hidden');
    });

    // Set current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Progressive enhancement note: add focus management and trapping if building a larger app.
</script>
<script>
    const accountDropdownBtn = document.getElementById('accountDropdownBtn');
    const menu = document.getElementById('accountDropdownMenu');

    if (accountDropdownBtn) {
        accountDropdownBtn.addEventListener('click', () => {
            menu.classList.toggle('hidden');
        });

        // Close dropdown if clicked outside
        document.addEventListener('click', (event) => {
            if (!accountDropdownBtn.contains(event.target) && !menu.contains(event.target)) {
                menu.classList.add('hidden');
            }
        });
    }
</script>
<script>
    function inviteUser() {
        if (navigator.share) {
            navigator.share({
                title: 'Join me on {{TEMPLATE_APP_NAME}}',
                text: "I’m on {{TEMPLATE_APP_NAME}}, a platform for creators. I think you’d enjoy it too — check it out!",
                url: '{{TEMPLATE_INVITATION_URL}}'
            })
                .catch(err => {
                    // User cancelled or error occurred
                    console.log("Share cancelled", err);
                });
        } else {
            alert("Sharing not supported on this browser.");
        }
    }
</script>
<script>
    toastr.options.closeDuration = 10000;
    toastr.options.progressBar = true;
    toastr.options.escapeHtml = false;

    {% if messages %}
        {% for message in messages %}
            {% if message.tags == 'success' %}
                toastr.success('{{message}}');
            {% elif message.tags == 'error' %}
                toastr.error('{{message}}');
            {% elif message.tags == 'warning' %}
                toastr.warning('{{message}}');
            {% elif message.tags == 'info' %}
                toastr.info('{{message}}');
            {% endif %}
        {% endfor %}
    {% endif %}
</script>